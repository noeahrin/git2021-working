<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8" />
  <title>FormObject21.html</title>
  <script src="js/formValidate.js"></script>
</head>

<body>
  <h2>회원가입 페이지</h2>
  <!--방법1]submit기능이 있는 버튼으로 전송시-->
  <!--
    <form name="frmObj" action="http://www.google.co.kr" method="get" onsubmit="return isValidate(this);">
    -->
  <!-- 방법2]submit기능이 없는 버튼으로 전송시-->
  <form name="frmObj" action="http://www.nate.com">

    <table style="width:75%;border-spacing:1px;background-color:green">

      <tr style="background-color:white">
        <td>아이디</td>
        <td><input type="text" name="id" size="20" /></td>
      </tr>
      <tr style="background-color:white">
        <td>비밀번호</td>
        <td><input type="password" name="pwd" size="20" /></td>
      </tr>
      <tr style="background-color:white">
        <td>비밀번호확인</td>
        <td><input type="password" name="pwd2" id="pwd2" size="20" /></td>
      </tr>
      <tr style="background-color:white">
        <td>성별</td>
        <td>
          <input type="radio" name="gender" value="man" />남
          <input type="radio" name="gender" value="woman" />녀
          <input type="radio" name="gender" value="trans" />트랜스젠더
        </td>
      </tr>
      <tr style="background-color:white">
        <td>관심사항</td>
        <td>
          <input type="checkbox" name="inter" value="pol" />정치
          <input type="checkbox" name="inter" value="eco" />경제
          <input type="checkbox" name="inter" value="spo" />스포츠
          <input type="checkbox" name="inter" value="ent" />연예
        </td>
      </tr>
      <tr style="background-color:white">
        <td>학력사항</td>
        <td>
          <select name="grade">
            <option value="">==학력을 선택하세요==</option>
            <option value="ele">초등학교</option>
            <option value="mid">중학교</option>
            <option value="hig">고등학교</option>
            <option value="uni">대학교</option>
          </select>
        </td>
      </tr>
      <tr style="background-color:white">
        <td>첨부파일</td>
        <td>
          <input type="file" name="file" size="40" />
        </td>
      </tr>
      <tr style="background-color:white">
        <td>자기소개</td>
        <td>
          <textarea cols="60" rows="5" name="self"></textarea>
        </td>
      </tr>
      <tr style="background-color:white">
        <td colspan="2" align="center">
          <table>
            <!-- 방법1:submit기능이 있는 폼 하위태그-->
            <tr>
              <td>
                <input style="height:50px" type="submit" value="submit버튼" title="type=submit" />
              </td>
              <td>
                <input type="image" src="../HTML5/Images/submit1.png" title="type=image" alt="image버튼" />
              </td>
              <td>
                <!--방법2:submit기능이 없는 태그로 전송-->
                <input style="height:50px" type="button" value="submit기능이없는 버튼"
                  onclick="fnNoSubmitButton(this.form);" />
              </td>
              <td>
                <!-- a 는 form 의 자식이 아니기 때문에 this.form 안됨. undefined 가 나옴. 
                                따라서 fnNoSubmitButton() 에서 수정해줘야함. -->
                <a href="#" onclick="fnNoSubmitButton(this.form);">
                  <img style="height:100%" border="0" src="../HTML5/Images/submit2.png" alt="이미지태그1"
                    title="a태그로 링크주고 a태그에 리스너 부착" />
                </a>
              </td>
              <td>
                <img style="cursor:pointer" src="../HTML5/Images/submit3.png" alt="이미지태그2" title="img태그에 직접 리스너 부착"
                  onclick="fnNoSubmitButton(this.form);" />
              </td>
            </tr>
          </table>
        </td>
      </tr>
    </table>
  </form>
</body>
<script>
  function isValidate(obj) {
    if (obj.id.value == '') {
      alert("아이디를 입력하세요");
      obj.id.focus();
      return false; // submit event 를 취소
    }
    else if (frmObj.pwd.value.length == 0) {
      alert("비밀번호를 입력하세요");
      frmObj.pwd.focus();
      return false;
    }
    else if (frmObj.pwd.value != frmObj.pwd2.value) {
      alert("비밀번호가 일치하지 않습니다.");
      frmObj.pwd2.value = "";
      frmObj.pwd2.focus();
      return false;
    }
    // 라디오 버튼 선택여부 판단하기
    var isGender = false;
    for (var i = 0; i < obj.gender.length; i++) {
      if (obj.gender[i].checked) {
        isGender = true;
        break;
      }
    }
    if (!isGender) {
      alert("성별을 선택해 주세요");
      obj.gender[0].focus(); // 라디오버튼에 포커스는 딱히 의미는 없..
      return false;
    }

    // 체크박스 선택여부 판단하기
    var count = 0;
    var notchecked = []; // new Array();
    for (var i = 0; i < obj.inter.length; i++) {
      if (obj.inter[i].checked) {
        count++;
      }
      else {
        notchecked.push(i); // 체크 안된 인덱스 넣기
      }
    }
    if (count < 2) {
      alert("관심사항은 두 개 이상 체크해주세요");
      obj.inter[notchecked[0]].focus(); // 체크안된 가장 빠른 인덱스에 포커스 주기
      return false;
    }

    // 선택목록 선택여부 판단
    if (obj.grade.selectedIndex == 0) {
      alert("학력을 선택해 주세요");
      obj.grade.focus();
      return false;
    }

    // 파일 선택 여부 판단
    if (obj.file.value == '') {
      alert("파일을 첨부해 주세요");
      obj.file.focus();
      return false;
    }

    // 자기소개 작성 여부 판단
    if (obj.self.value == '') {
      alert("자기소개를 작성해 주세요");
      obj.self.focus();
      return false;
    }

    // JS 에서 함수가 return 값이 없을 때는 함수 호출시 undefiend가 반환됨
    return true;
  }

  function fnNoSubmitButton(obj) {
    console.log(obj);
    if (obj == undefined) {
      obj = document.forms[0];
    }

    // form 객체의 submit() 함수로 전송. 
    // 단, submit() 함수를 호출하더라도 submit 이벤트는 발생하지 않음.
    if (isValidate(obj)) {
      obj.submit();
    }
  }
</script>

</html>