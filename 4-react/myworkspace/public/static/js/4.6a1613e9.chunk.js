(this.webpackJsonpmyworkspace=this.webpackJsonpmyworkspace||[]).push([[4],{38:function(e,t,n){"use strict";n.r(t);var i=n(14),c=n(0),a=n(4),l=n(11),s=n(1),o=function(e){var t,n,i=e.item,a=e.onClose,o=e.onSave,r=Object(l.c)((function(e){return e.profile})),d=Object(c.useRef)(null),m=Object(c.useRef)(null);return Object(s.jsx)("div",{className:"modal d-block",style:{backgroundColor:"rgba(0, 0, 0, 0.5)"},onClick:function(){a()},children:Object(s.jsx)("div",{className:"modal-dialog",children:Object(s.jsxs)("div",{className:"modal-content",onClick:function(e){return e.stopPropagation()},children:[Object(s.jsxs)("div",{className:"modal-header",children:[Object(s.jsx)("h5",{className:"modal-title",children:"EDIT FEED"}),Object(s.jsx)("button",{type:"button",className:"btn-close","aria-label":"Close",onClick:function(){a()}})]}),Object(s.jsx)("textarea",{className:"form-control mb-1",placeholder:"Leave a post here",style:{boxSizing:"border-box",height:"15vh"},ref:d}),Object(s.jsxs)("div",{className:"d-flex",children:[Object(s.jsx)("input",{type:"file",className:"form-control",accept:"image/png, image/jpeg, video/mp4",ref:m}),Object(s.jsx)("button",{className:"btn btn-primary text-nowrap ms-1",type:"button",onClick:function(){!function(e){var i,c,a,l;if(1==(null===(i=m.current)||void 0===i||null===(c=i.files)||void 0===c?void 0:c.length)){var s,o=null===(s=m.current)||void 0===s?void 0:s.files[0],r=new FileReader;r.readAsDataURL(o),r.onload=function(){var e;t=null===(e=r.result)||void 0===e?void 0:e.toString(),n=o.type}}else t=void 0,n=void 0;console.log(null===(a=m.current)||void 0===a||null===(l=a.files)||void 0===l?void 0:l.length),console.log(t)}()},children:"\uc785\ub825"})]}),Object(s.jsx)("div",{className:"media text-center mt-4",children:Object(s.jsx)("span",{children:"video/mp4"===i.fileType?Object(s.jsx)("video",{src:i.dataUrl,style:{width:"80%"},controls:!0}):"image/jpeg"===i.fileType||"image/png"===i.fileType?Object(s.jsx)("img",{src:i.dataUrl,alt:"feed",style:{width:"80%"}}):Object(s.jsx)("img",{src:i.dataUrl,alt:"feed",style:{display:"none"}})})}),Object(s.jsx)("p",{className:"card-text",children:i.content}),Object(s.jsxs)("div",{className:"modal-footer",children:[Object(s.jsx)("button",{type:"button",className:"btn btn-secondary",onClick:function(){a()},children:"\ub2eb\uae30"}),Object(s.jsx)("button",{type:"button",className:"btn btn-primary",onClick:function(){!function(){var e,c={id:i.id,content:null===(e=d.current)||void 0===e?void 0:e.value,dataUrl:t,fileType:n,createTime:(new Date).getTime(),modifyTime:(new Date).getTime(),username:r.username,image:r.image};o(c)}()},children:"\uc800\uc7a5"})]})]})})})},r=function(e){var t=new Date(e);return e-(new Date).getTime()>=864e5?t.toLocaleDateString():t.toLocaleTimeString()};t.default=function(){var e=Object(l.c)((function(e){return e.profile})),t=Object(c.useState)([]),n=Object(i.a)(t,2),d=n[0],m=n[1],u=Object(c.useState)(!1),j=Object(i.a)(u,2),b=j[0],f=j[1],v=Object(c.useRef)(null),p=Object(c.useRef)(null),h=Object(c.useRef)(null),x=function(t,n){var i,c,l={id:d.length>0?d[0].id+1:1,content:null===(i=v.current)||void 0===i?void 0:i.value,dataUrl:t,fileType:n,username:e.username,image:e.image,createTime:(new Date).getTime(),modifyTime:(new Date).getTime()};m(Object(a.b)((function(e){e.unshift(l)}))),null===(c=h.current)||void 0===c||c.reset()},g=Object(c.useRef)({id:0,content:"",createTime:0,dataUrl:"",fileType:"",modifyTime:0});return Object(s.jsxs)("div",{style:{width:"40vw"},className:"mx-auto",children:[Object(s.jsx)("h2",{className:"text-center my-5",children:"Feeds"}),b&&Object(s.jsx)(o,{item:g.current,onClose:function(){f(!1)},onSave:function(e){!function(e){console.log(e),m(Object(a.b)((function(t){var n=t.find((function(t){return t.id===e.id}));n&&(n.content=e.content,n.dataUrl=e.dataUrl,n.fileType=e.fileType,n.modifyTime=e.createTime,n.username=e.username,n.image=e.image)}))),f(!1)}(e)}}),Object(s.jsxs)("form",{className:"mt-5",ref:h,onSubmit:function(e){return e.preventDefault()},children:[Object(s.jsx)("textarea",{className:"form-control mb-1",placeholder:"Leave a post here",style:{boxSizing:"border-box",height:"15vh"},ref:v}),Object(s.jsxs)("div",{className:"d-flex",children:[Object(s.jsx)("input",{type:"file",className:"form-control",accept:"image/png, image/jpeg, video/mp4",ref:p}),Object(s.jsx)("button",{className:"btn btn-primary text-nowrap ms-1",type:"button",onClick:function(){!function(e){var t,n;if(!e||"Enter"===e.code)if(1===(null===(t=p.current)||void 0===t||null===(n=t.files)||void 0===n?void 0:n.length)){var i,c=null===(i=p.current)||void 0===i?void 0:i.files[0],a=new FileReader;a.readAsDataURL(c),a.onload=function(){var e;x(null===(e=a.result)||void 0===e?void 0:e.toString(),c.type)}}else x(void 0,void 0)}(null)},children:"\uc785\ub825"})]})]}),Object(s.jsx)("div",{className:"mt-1",children:d.map((function(t,n){return Object(s.jsxs)("div",{className:"card mt-1",children:[Object(s.jsx)("div",{className:"card-header",children:Object(s.jsxs)("span",{style:{fontSize:"0.75rem"},children:[Object(s.jsx)("img",{src:t.image,style:{width:"24px",height:"24px",backgroundPosition:"center",backgroundRepeat:"no-repeat",backgroundSize:"cover",borderRadius:"50%"},alt:e.username}),"- ",t.username," \uc218\uc815\uc2dc\uac04: ",r(t.modifyTime)]})}),Object(s.jsxs)("div",{className:"card-body",children:[Object(s.jsx)("div",{className:"media",children:"video/mp4"===t.fileType?Object(s.jsx)("video",{src:t.dataUrl,style:{width:"100%"},controls:!0}):"image/jpeg"===t.fileType||"image/png"===t.fileType?Object(s.jsx)("img",{src:t.dataUrl,alt:"feed",style:{width:"100%"}}):Object(s.jsx)("img",{src:t.dataUrl,alt:"feed",style:{display:"none"}})}),Object(s.jsx)("p",{className:"card-text",children:t.content}),Object(s.jsxs)("span",{className:"text-secondary",children:["\uc791\uc131\uc2dc\uac04: ",r(t.createTime)]}),Object(s.jsx)("a",{href:"#!",onClick:function(e){e.preventDefault(),function(e,t){m(Object(a.b)((function(e){e.splice(t,1)})))}(t.id,n)},className:"link-secondary fs-6 float-end remove",children:"\uc0ad\uc81c"}),Object(s.jsx)("a",{href:"#!",onClick:function(e){e.preventDefault(),function(e){g.current=e,f(!0)}(t)},className:"link-secondary fs-6 float-end edit me-2",children:"\uc218\uc815"})]})]},n)}))})]})}}}]);
//# sourceMappingURL=4.6a1613e9.chunk.js.map